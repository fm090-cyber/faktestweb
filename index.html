<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FM X ABD TOOLKIT</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Arial', sans-serif; background: #f5f5f5; }
        
        /* Login Page */
        .login-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, #25D366, #128C7E);
            display: flex; justify-content: center; align-items: center;
        }
        .login-box {
            background: white; padding: 30px; border-radius: 15px;
            width: 90%; max-width: 400px; text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .login-logo img {
            width: 100px; height: 100px; border-radius: 50%;
            border: 4px solid #25D366; margin-bottom: 15px;
        }
        .login-logo h1 { color: #25D366; margin-bottom: 10px; }
        .password-input { margin: 20px 0; position: relative; }
        .password-input i { position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: #25D366; }
        .password-input input {
            width: 100%; padding: 12px 12px 12px 45px;
            border: 2px solid #ddd; border-radius: 8px;
        }
        .login-btn {
            width: 100%; padding: 12px; background: #25D366;
            color: white; border: none; border-radius: 8px;
            font-size: 16px; cursor: pointer; display: flex;
            align-items: center; justify-content: center; gap: 10px;
        }
        .login-error { color: red; margin-top: 10px; display: none; }
        
        /* Main Content */
        .main-content { display: none; }
        
        /* Header */
        .header {
            background: white; padding: 15px 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex; justify-content: space-between; align-items: center;
        }
        .logo { display: flex; align-items: center; gap: 10px; }
        .logo img { width: 40px; height: 40px; border-radius: 50%; border: 2px solid #25D366; }
        .header-controls { display: flex; gap: 15px; align-items: center; }
        
        /* Admin Panel */
        .admin-panel {
            background: white; margin: 20px; padding: 20px;
            border-radius: 10px; border: 2px solid #25D366;
            display: none;
        }
        .add-tool-btn {
            background: #25D366; color: white; padding: 10px 20px;
            border: none; border-radius: 8px; cursor: pointer;
            display: flex; align-items: center; gap: 10px;
        }
        
        /* Tools Grid */
        .tools-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px; padding: 20px;
        }
        .tool-card {
            background: white; border-radius: 10px; overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .tool-image {
            width: 100%; height: 150px; background: #25D366;
            position: relative;
        }
        .tool-badge {
            position: absolute; top: 10px; right: 10px;
            background: white; color: #25D366; padding: 3px 10px;
            border-radius: 15px; font-size: 12px;
        }
        .tool-content { padding: 15px; }
        .tool-title { font-size: 18px; font-weight: bold; margin-bottom: 5px; }
        .tool-desc { color: #666; font-size: 14px; margin-bottom: 15px; }
        .tool-actions { display: flex; gap: 10px; }
        .view-btn {
            flex: 1; padding: 10px; background: #25D366;
            color: white; border: none; border-radius: 5px;
            cursor: pointer; display: flex; align-items: center;
            justify-content: center; gap: 8px;
        }
        
        /* Modal */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7); display: none;
            justify-content: center; align-items: center; z-index: 1000;
        }
        .modal {
            background: white; padding: 20px; border-radius: 10px;
            width: 90%; max-width: 500px;
        }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: bold; }
        .form-input, .form-select {
            width: 100%; padding: 10px; border: 2px solid #ddd;
            border-radius: 5px;
        }
        .modal-actions { display: flex; gap: 10px; margin-top: 20px; }
        .save-btn, .cancel-btn {
            flex: 1; padding: 10px; border: none; border-radius: 5px;
            cursor: pointer;
        }
        .save-btn { background: #25D366; color: white; }
        .cancel-btn { background: #eee; color: #333; }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div class="login-screen" id="loginScreen">
        <div class="login-box">
            <div class="login-logo">
                <img src="https://i.ibb.co/B2gkNxgJ/IMG-1385.jpg" alt="Logo">
                <h1>FM X ABD TOOLKIT</h1>
                <p>Official Tools Collection</p>
            </div>
            
            <div class="password-input">
                <i class="fas fa-lock"></i>
                <input type="password" id="password" placeholder="Enter password">
            </div>
            
            <button class="login-btn" id="loginBtn">
                <i class="fas fa-sign-in-alt"></i> Access Toolkit
            </button>
            
            <div class="login-error" id="loginError">
                Wrong password! Try: fmxabd (Member) or fmxadmin (Admin)
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <img src="https://i.ibb.co/B2gkNxgJ/IMG-1385.jpg" alt="Logo">
                <div>
                    <h2>FM X ABD TOOLKIT</h2>
                    <small>Official Tools</small>
                </div>
            </div>
            
            <div class="header-controls">
                <button class="logout-btn" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </header>

        <!-- Admin Panel (ONLY for Admin) -->
        <div class="admin-panel" id="adminPanel">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h3><i class="fas fa-user-shield"></i> Admin Panel</h3>
                <button class="add-tool-btn" id="addToolBtn">
                    <i class="fas fa-plus-circle"></i> Add New Tool
                </button>
            </div>
        </div>

        <!-- Tools Grid -->
        <div class="tools-grid" id="toolsGrid">
            <!-- Tools will load here -->
        </div>
    </div>

    <!-- Add/Edit Tool Modal -->
    <div class="modal-overlay" id="toolModal">
        <div class="modal">
            <h3 style="margin-bottom: 20px;"><i class="fas fa-toolbox"></i> Add New Tool</h3>
            
            <form id="toolForm">
                <div class="form-group">
                    <label>Tool Name</label>
                    <input type="text" id="toolName" class="form-input" placeholder="Enter tool name" required>
                </div>
                
                <div class="form-group">
                    <label>Category</label>
                    <select id="toolCategory" class="form-select" required>
                        <option value="premium">Premium</option>
                        <option value="quran">Quran Pak</option>
                        <option value="islamic">Al Islamic</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Description</label>
                    <input type="text" id="toolDescription" class="form-input" placeholder="Enter tool description" required>
                </div>
                
                <div class="form-group">
                    <label>Tool URL</label>
                    <input type="url" id="toolUrl" class="form-input" placeholder="https://example.com" required>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="cancel-btn" id="cancelBtn">Cancel</button>
                    <button type="submit" class="save-btn" id="saveBtn">Save Tool</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // SIMPLE FIXED VERSION
        const MEMBER_PASSWORD = "fmxabd";
        const ADMIN_PASSWORD = "fmxadmin";
        
        let currentUser = null;
        let tools = [];
        let currentEditIndex = -1;
        
        // DOM Elements
        const loginScreen = document.getElementById('loginScreen');
        const mainContent = document.getElementById('mainContent');
        const adminPanel = document.getElementById('adminPanel');
        const passwordInput = document.getElementById('password');
        const loginBtn = document.getElementById('loginBtn');
        const loginError = document.getElementById('loginError');
        const logoutBtn = document.getElementById('logoutBtn');
        const toolsGrid = document.getElementById('toolsGrid');
        const addToolBtn = document.getElementById('addToolBtn');
        const toolModal = document.getElementById('toolModal');
        const cancelBtn = document.getElementById('cancelBtn');
        const toolForm = document.getElementById('toolForm');
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Load tools from localStorage
            const savedTools = localStorage.getItem('fmxabd_simple_tools');
            if (savedTools) {
                tools = JSON.parse(savedTools);
            }
            
            // Check if already logged in
            const savedUser = localStorage.getItem('fmxabd_simple_user');
            if (savedUser) {
                currentUser = savedUser;
                showMainContent();
            }
            
            renderTools();
        });

        // Login
        loginBtn.addEventListener('click', function() {
            const password = passwordInput.value.trim();
            
            if (password === MEMBER_PASSWORD) {
                currentUser = 'member';
                loginSuccess();
            } else if (password === ADMIN_PASSWORD) {
                currentUser = 'admin';
                loginSuccess();
            } else {
                loginError.style.display = 'block';
            }
        });

        function loginSuccess() {
            localStorage.setItem('fmxabd_simple_user', currentUser);
            showMainContent();
            loginError.style.display = 'none';
            passwordInput.value = '';
        }

        function showMainContent() {
            loginScreen.style.display = 'none';
            mainContent.style.display = 'block';
            
            // Show admin panel ONLY for admin
            if (currentUser === 'admin') {
                adminPanel.style.display = 'block';
            }
            
            renderTools();
        }

        // Logout
        logoutBtn.addEventListener('click', function() {
            currentUser = null;
            localStorage.removeItem('fmxabd_simple_user');
            mainContent.style.display = 'none';
            loginScreen.style.display = 'flex';
        });

        // Render tools
        function renderTools() {
            toolsGrid.innerHTML = '';
            
            if (tools.length === 0) {
                toolsGrid.innerHTML = `
                    <div style="text-align: center; padding: 50px 20px; color: #666;">
                        <i class="fas fa-tools" style="font-size: 3rem; margin-bottom: 20px; opacity: 0.5;"></i>
                        <h3 style="margin-bottom: 10px;">No tools found</h3>
                        <p>${currentUser === 'admin' ? 'Click "Add New Tool" to add your first tool!' : 'No tools available yet.'}</p>
                    </div>
                `;
                return;
            }
            
            tools.forEach((tool, index) => {
                const card = document.createElement('div');
                card.className = 'tool-card';
                card.innerHTML = `
                    <div class="tool-image" style="background: linear-gradient(135deg, #25D366, #128C7E);">
                        <div class="tool-badge">${tool.category.toUpperCase()}</div>
                    </div>
                    <div class="tool-content">
                        <div class="tool-title">${tool.name}</div>
                        <p class="tool-desc">${tool.description}</p>
                        <div class="tool-actions">
                            <button class="view-btn" onclick="window.open('${tool.url}', '_blank')">
                                <i class="fas fa-external-link-alt"></i> View Tool
                            </button>
                            ${currentUser === 'admin' ? `
                                <button onclick="editTool(${index})" style="background: #ffc107; color: #333; border: none; padding: 10px; border-radius: 5px; cursor: pointer;">
                                    <i class="fas fa-edit"></i> Edit
                                </button>
                                <button onclick="deleteTool(${index})" style="background: #dc3545; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer;">
                                    <i class="fas fa-trash"></i> Delete
                                </button>
                            ` : ''}
                        </div>
                    </div>
                `;
                toolsGrid.appendChild(card);
            });
        }

        // Add new tool
        addToolBtn.addEventListener('click', function() {
            if (currentUser !== 'admin') {
                alert('Only admin can add tools!');
                return;
            }
            
            currentEditIndex = -1;
            toolForm.reset();
            toolModal.style.display = 'flex';
        });

        // Edit tool
        window.editTool = function(index) {
            if (currentUser !== 'admin') return;
            
            const tool = tools[index];
            currentEditIndex = index;
            
            document.getElementById('toolName').value = tool.name;
            document.getElementById('toolCategory').value = tool.category;
            document.getElementById('toolDescription').value = tool.description;
            document.getElementById('toolUrl').value = tool.url;
            
            toolModal.style.display = 'flex';
        }

        // Delete tool
        window.deleteTool = function(index) {
            if (currentUser !== 'admin') return;
            
            if (confirm('Are you sure you want to delete this tool?')) {
                tools.splice(index, 1);
                saveTools();
                renderTools();
                alert('Tool deleted successfully!');
            }
        }

        // Close modal
        cancelBtn.addEventListener('click', function() {
            toolModal.style.display = 'none';
        });

        // Save tool form
        toolForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (currentUser !== 'admin') {
                alert('Only admin can save tools!');
                return;
            }
            
            const toolData = {
                id: currentEditIndex === -1 ? Date.now() : tools[currentEditIndex].id,
                name: document.getElementById('toolName').value.trim(),
                category: document.getElementById('toolCategory').value,
                description: document.getElementById('toolDescription').value.trim(),
                url: document.getElementById('toolUrl').value.trim(),
                image: 'https://images.unsplash.com/photo-1611605698335-8b1569810432?w=800',
                icon: 'fas fa-tools',
                views: currentEditIndex === -1 ? 0 : tools[currentEditIndex].views
            };
            
            if (currentEditIndex === -1) {
                tools.push(toolData);
                alert('Tool added successfully!');
            } else {
                tools[currentEditIndex] = toolData;
                alert('Tool updated successfully!');
            }
            
            saveTools();
            renderTools();
            toolModal.style.display = 'none';
        });

        // Save tools to localStorage
        function saveTools() {
            localStorage.setItem('fmxabd_simple_tools', JSON.stringify(tools));
            console.log('Tools saved. Total:', tools.length);
        }

        // Close modal when clicking outside
        toolModal.addEventListener('click', function(e) {
            if (e.target === toolModal) {
                toolModal.style.display = 'none';
            }
        });
    </script>
</body>
</html>
